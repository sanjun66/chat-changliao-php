(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-589a7284"],{8593:function(t,e,a){"use strict";a.d(e,"h",(function(){return n})),a.d(e,"e",(function(){return o})),a.d(e,"o",(function(){return i})),a.d(e,"a",(function(){return l})),a.d(e,"g",(function(){return s})),a.d(e,"k",(function(){return u})),a.d(e,"r",(function(){return c})),a.d(e,"c",(function(){return d})),a.d(e,"j",(function(){return f})),a.d(e,"f",(function(){return m})),a.d(e,"p",(function(){return h})),a.d(e,"b",(function(){return p})),a.d(e,"l",(function(){return b})),a.d(e,"s",(function(){return g})),a.d(e,"i",(function(){return v})),a.d(e,"q",(function(){return O})),a.d(e,"m",(function(){return j})),a.d(e,"n",(function(){return _})),a.d(e,"d",(function(){return y}));var r=a("b775");function n(t){return Object(r["a"])({url:"/admin/logs/",method:"get",params:t})}function o(t){return Object(r["a"])({url:"/admin",method:"get",params:t})}function i(t){return Object(r["a"])({url:"/admin",method:"put",data:t})}function l(t){return Object(r["a"])({url:"/admin",method:"delete",data:t})}function s(t){return Object(r["a"])({url:"/admin/index",method:"get",params:t})}function u(t){return Object(r["a"])({url:"/admin/roles",method:"get",params:t})}function c(t){return Object(r["a"])({url:"/admin/roles",method:"put",data:t})}function d(t){return Object(r["a"])({url:"/admin/roles",method:"delete",data:t})}function f(t){return Object(r["a"])({url:"/admin/roles/auth",method:"get",params:t})}function m(t){return Object(r["a"])({url:"/admin/authorities",method:"get"})}function h(t){return Object(r["a"])({url:"/admin/authorities",method:"put",data:t})}function p(t){return Object(r["a"])({url:"/admin/authorities",method:"delete",data:t})}function b(t){return Object(r["a"])({url:"/admin/smsInfo",method:"get",data:t})}function g(t){return Object(r["a"])({url:"/admin/smsSave",method:"PUT",data:t})}function v(t){return Object(r["a"])({url:"/admin/ossInfo",method:"get",data:t})}function O(t){return Object(r["a"])({url:"/admin/ossSave",method:"PUT",data:t})}function j(t){return Object(r["a"])({url:"/admin/Version",method:"get",data:t})}function _(t){return Object(r["a"])({url:"/admin/Version",method:"PUT",data:t})}function y(t){return Object(r["a"])({url:"/admin/version/"+t,method:"delete"})}},eb10:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.search}},[a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{clearable:""},model:{value:t.search.state,callback:function(e){t.$set(t.search,"state",e)},expression:"search.state"}},[a("el-option",{attrs:{value:"1",label:"正常"}}),a("el-option",{attrs:{value:"0",label:"禁用"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("查询")])],1)],1),a("div",{staticStyle:{"text-align":"right","margin-bottom":"15px"}},[a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.onAddOrUpdate()}}},[t._v("新增")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{prop:"desc",label:"描述","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{placement:"top-start",width:"none",trigger:"hover"}},[a("div",[t._v(t._s(e.row.desc))]),a("span",{attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(e.row.desc))])])]}}])}),a("el-table-column",{attrs:{prop:"state",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.state?a("el-tag",{attrs:{type:"success"}},[t._v("正常")]):a("el-tag",{attrs:{type:"danger"}},[t._v("禁用")])]}}])}),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"updated_at",label:"更新时间"}}),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.onAddOrUpdate(e.row)}}},[t._v("编辑")]),a("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{onConfirm:function(a){return t.handleDelete(e.$index,e.row)}}},[a("el-button",{staticStyle:{"margin-left":"6px"},attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[t._v("删除 ")])],1)]}}])})],1),a("el-dialog",{staticClass:"el-form-dialog",attrs:{title:t.form.id>0?"系统角色-编辑":"系统角色-添加",visible:t.dialogFormVisible,top:"2vh","close-on-click-modal":!1,"before-close":t.handleClose},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"描述",prop:"desc"}},[a("el-input",{model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-radio-group",{model:{value:t.form.state,callback:function(e){t.$set(t.form,"state",e)},expression:"form.state"}},[a("el-radio",{attrs:{label:1}},[t._v("正常")]),a("el-radio",{attrs:{label:0}},[t._v("禁用")])],1)],1),a("el-form-item",{attrs:{label:"菜单",prop:"auth_id"}},[a("el-cascader",{attrs:{value:t.cascaderValue,options:t.authoritiesData,props:t.props,clearable:""},on:{change:t.changeCascader}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.handleClose()}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:t.loadingBut},on:{click:function(e){return t.submitForm()}}},[t._v("确 定")])],1)],1)],1)},n=[],o=a("b85c"),i=(a("ac1f"),a("841c"),a("a15b"),a("8593")),l={name:"roles",data:function(){return{list:null,loading:!1,pages:{total:0,limit:20},search:{state:"",page:1},loadingBut:!1,dialogFormVisible:!1,form:{id:"",name:"",desc:"",state:1,auth_id:""},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],desc:[{required:!0,message:"请输入描述",trigger:"blur"}],auth_id:[{required:!0,message:"请选择授权菜单",trigger:"blur"}]},props:{multiple:!0},authoritiesList:[],authoritiesData:[],cascaderValue:[]}},created:function(){this.getRolesList(),this.getAuthoritiesList()},methods:{onSubmit:function(){this.search.page=1,this.getRolesList()},handleCurrentChange:function(t){this.search.page=t,this.getRolesList()},getRolesList:function(){var t=this;this.loading=!0,Object(i["k"])(this.search).then((function(e){var a=e.data;t.loading=!1,t.list=a.data.role_list}))},handleClose:function(){this.dialogFormVisible=!1},submitForm:function(){var t=this;this.$refs["form"].validate((function(e){e&&(t.loadingBut=!0,Object(i["r"])(t.form).then((function(e){t.loadingBut=!1,t.dialogFormVisible=!1,t.getRolesList()})).catch((function(){t.loadingBut=!1})))}))},onAddOrUpdate:function(t){this.form=null,this.cascaderValue=null,this.dialogFormVisible=!0,this.form={id:"",name:"",desc:"",state:1,auth_id:""},t&&(this.form=Object.assign({},t),this.cascaderValue=this.authIdToCascaderValue(this.form.auth_id))},handleDelete:function(t,e){var a=this;Object(i["c"])(e).then((function(t){a.getRolesList()}))},changeCascader:function(t){this.cascaderValue=t;var e,a=[],r=Object(o["a"])(t);try{for(r.s();!(e=r.n()).done;){var n,i=e.value,l=Object(o["a"])(i);try{for(l.s();!(n=l.n()).done;){var s=n.value;-1===a.indexOf(s)&&a.push(s)}}catch(u){l.e(u)}finally{l.f()}}}catch(u){r.e(u)}finally{r.f()}this.form.auth_id=a.join(",")},getAuthoritiesList:function(){var t=this;Object(i["f"])().then((function(e){var a=e.data;t.authoritiesList=a.data.auth_list,t.authoritiesDataToArr(a.data.auth_list)}))},getRolesAuth:function(){Object(i["j"])().then((function(t){console.log(t)}))},authoritiesDataToArr:function(t){var e,a=[],r=[],n=[],i=Object(o["a"])(t);try{for(i.s();!(e=i.n()).done;){var l=e.value;1==l.level?r.push(l):2==l.level&&n.push(l)}}catch(b){i.e(b)}finally{i.f()}for(var s=0,u=r;s<u.length;s++){var c,d=u[s],f={value:d.id,label:d.title},m=[],h=Object(o["a"])(n);try{for(h.s();!(c=h.n()).done;){var p=c.value;d.id==p.parent_id&&m.push({value:p.id,label:p.title})}}catch(b){h.e(b)}finally{h.f()}m.length>0&&(f.children=m),a.push(f)}this.authoritiesData=a},authIdToCascaderValue:function(t){var e,a=t.split(","),r=[],n=Object(o["a"])(a);try{for(n.s();!(e=n.n()).done;){var i,l=e.value,s=Object(o["a"])(this.authoritiesList);try{for(s.s();!(i=s.n()).done;){var u=i.value;if(l==u.id){u.parent_id>0?r.push([u.parent_id,parseInt(l)]):r.push([parseInt(l)]);break}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){n.e(c)}finally{n.f()}return r}}},s=l,u=a("2877"),c=Object(u["a"])(s,r,n,!1,null,"2fffc56d",null);e["default"]=c.exports}}]);